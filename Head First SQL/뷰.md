# 뷰

- 뷰는 쿼리상에서만 존재하는 테이블 즉 가상테이블이다.
- 뷰를사용하면 새열이 데이터베이스에 추가될 떄 마다 새 정보가 뷰에 반영되기 때문에 유용하다.
- ::가상테이블은 데이터베이스내에 존재하지 않는다.

## 뷰가 데이터베이스에 유용한 이유

### 데이터베이스의 구조를 변경하여도 테이블에 의존하는 애플리케이션을 변경할 필요가 없다.

- SQL 지식은 애플리케이션을 만드는데 사용한다.
- 데이터에 대한 뷰를 만들면 시스템 내부의 테이블 구조를 변경하더라도 기존 테이블의 구조를 흉내내는 뷰를 만들면 애플리케이션은 변경없이 사용할 수 있다.

### 뷰는 복잡한 쿼리를 간단한 명령으로 단순하게 만들 수 있어 편리하다.

- 뷰를 만들려면 복잡한 조인과 서브쿼리를 반복해서 사용할 필요가 없다.
- 뷰는 복잡한 쿼리의 내용을 숨긴다.
- SQL을 PHP나 다른 프로그래밍 언어와 함계 사용하면, 코드에 뷰를 추가하는 것이 훨씬 쉽다.
- 크고 조인으로 가득한 복잡한 쿼리가 아닌 뷰의 코드를 이용하게 된다.
- 간단한 의미는 입력 실수의 가능성이 줄고 코드의 가독성이 높아진다.

### 사용자에게 필요없는 정보를 숨기는 뷰를 만들 수 있다.

- gregs_list에 신용카드 정보를 가지고있는 테이블을 추가한다면, 뷰를 만들어서 카드의 세부 정보를 보이지 않고도 그 정보를 이용할 수 있다.
- 직원들에게 민감한 정보를 숨기면서 필요한 정보만을 볼 수 있게 할 수 있다.

## 뷰 생성

exmaple

```sql
CREATE VIEW "뷰이름" AS "SELECT 문"
```

```sql
SELECT * FROM "뷰이름"
```

- 위 SQL문을 풀어보자면 아래와 같다.

```sql
- SELECT * FROM (SELECT ~) AS "뷰이름"
```

## 뷰 INSERT, UPDATE, DELETE 하기

- 뷰를 가지고 SELECT 만을 사용할 수 있는것은 아니다.
- 경우에 따라 UPDATE, INSERT, DELETE도 가능하다.
- ::업데이트가 가능한 뷰는 참조하는 테이블의 열들이 NOT NULL 열들만으로 구성된 뷰여야한다.
- ::SUM, COUNT, AVG 같은 집계 연산자와 BETWEEN, HAVING, IN, NOT IN의 연사자를 표현하지 않은 뷰만이 업데이트가 가능하다.
- ::INSET, UPDATE, DELETE하기 위해 뷰를 사용하는 경우는 드물 뿐더러 해당 작업을 할 때는 테이블로 작업을 하는게 낫다.

## 뷰 삭제

exmaple

```sql
DROP VIEW "뷰이름"
```

- ::CHECK 제약조건과 뷰는 여러사람이 데이터베이스를 이용할 때 데이터베이스를 관리, 통제하는데 도움이 된다.
